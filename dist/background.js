(()=>{"use strict";chrome.runtime.onMessage.addListener(((t,e,s)=>{if("newHighlight"===t.type){const e=t.data;chrome.storage.local.get(["highlights"],(t=>{const s=[...t.highlights||[],e];chrome.storage.local.set({highlights:s},(()=>{}))}))}})),chrome.tabs.onUpdated.addListener(((t,e,s)=>{if("complete"===e.status&&s.active){const e=s.url;console.log("made it into a new tab"),chrome.storage.local.get(["highlights"],(s=>{const o=(s.highlights||[]).filter((t=>t.url===e));console.log(o),chrome.tabs.sendMessage(t,{type:"websiteHighlights",data:o})}))}}))})();