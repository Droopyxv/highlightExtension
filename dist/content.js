(()=>{"use strict";function e(e,n){const t=document.createRange();return t.selectNodeContents(e),n.compareBoundaryPoints(Range.END_TO_START,t)<=0&&n.compareBoundaryPoints(Range.START_TO_END,t)>=0}document.addEventListener("mouseup",(function(){const n=window.getSelection();n&&n.toString().length>0&&(!function(n){const t=[],o=document.createTreeWalker(n.commonAncestorContainer,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT);for(;o.nextNode();){const r=o.currentNode;e(r,n)&&t.push(r)}0===t.length&&n.commonAncestorContainer.nodeType===Node.TEXT_NODE&&t.push(n.commonAncestorContainer),t.forEach((e=>{const t=document.createElement("span");t.style.backgroundColor="yellow";const o=document.createRange();o.selectNodeContents(e),function(e,n){const t=e.cloneRange();return t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),t}(o,n).surroundContents(t)}))}(n.getRangeAt(0)),n.removeAllRanges())}))})();